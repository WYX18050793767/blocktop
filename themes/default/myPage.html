<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>区块链头条_区块链头条官网</title>
    <meta name="baidu-site-verification" content="" />
    <meta name="keywords" content="区块链头条,区块链头条官网,区块链,区块链技术,比特币,区块链媒体"/>
    <meta name="description" content=""/>
    <meta name="referrer" content="never">
    <link rel="stylesheet" href="css/common.css?1254">
    <link rel="stylesheet" href="css/NewsInformation.css">
    <link rel="stylesheet" href="css/specialColumn.css">
</head>
<style>
    body{
        background: white!important;
    }
    .userBackground{
        width: 1200px;
        margin: 0 auto;
        height: 170px;
        background: url("images/UserBackground.png")no-repeat top;
        background-size: 100% 100%;
        overflow: hidden;
    }
    .userContent{
        width: 90%;
        margin: 30px auto 0 auto;
        height: 100px;
        position: relative;
    }
    .upgrade{
        width: 115px;
        height: 35px;
        background: #D40507;
        position: absolute;
        right: 0;
        top: 40px;
        line-height: 35px;
        text-align: center;
        color: white;
        font-size: 13px;
        letter-spacing: 1px;
        cursor:no-drop;
    }
    .usertopImg{
       width: 10%;
        height: 100%;
        float: left;
    }
    .usertopImg img{
        width: 84px;
        height: 84px;
        margin-top: 8px;
    }
    .modifyinformation{
        width: 90%;
        height: 100%;
        float: left;
        padding-top: 20px;
        font-size: 18px;
    }
    .modifysonp span{
        margin-right: 60px;
        font-size: 15px;
    }
    .modifysonp{
        margin-top: 12px;
    }
    .modifyUserName{
        cursor: pointer;
    }
    .modifyUserName img{
        position: relative;
        top: 2px;
    }
    .InpUserName{
        border: none;
        background: transparent;
        outline: none;
        pointer-events: none;
        font-size: 18px;
        color: black;
    }
    .InpUserName::placeholder{
        color: black;
    }
    .subhis{
        width: 1200px;
        margin: 30px auto 0 auto;
    }
    .subhis ul{
        width: 100%;

    }
    .subhis ul li{
        width: 13%;
        text-align: center;
        float: left;
        font-size: 25px;
        font-weight: 300;
        cursor: pointer;
    }
    .subhis ul li:nth-child(1){
        font-weight: bold;
    }
    .subscription{
        width: 1200px;
        margin: 0px auto;
        clear: both;
        padding-top: 20px;

    }
    .subscription ul li{
        height: 150px;
        width: 95%;
        margin: 0 auto;
        position: relative;
        border-bottom: 1px solid #f0f0f0;
    }
    .subscription-Tx{
        width: 105px;
        height: 105px;
        margin-top: 22px;
    }
    .subscriptionContent{
        width: 88%;
        float: right;
        position: relative;
        padding-top: 40px;
    }
    .subscriptionTitle{
        font-size: 23px;
    }
    .subscriptionText{
        font-size: 18px;
        color: #b9b9b9;
        margin-top: 10px;
    }
    .bscriptionBtn{
        width:120px ;
        height: 35px;
        background: #999999;
        color: white;
        line-height: 35px;
        text-align: center;
        position: absolute;
        right: 0;
        top: 60px;
        border-radius: 4px;
        cursor: pointer;
    }
    .historyrecord{
        width: 1200px;
        margin: 0 auto;
        display: none;
        clear: both;
    }
    .column-special{
        width: 325px;
        float: right;
        background: white;
        position: relative;
        bottom: 0;
        min-height: 0px;
        border: 1px #e0e3e7 solid;
        border-radius: 4px;
        margin-bottom: 30px;
    }
    .headImageNameTc{
        position:fixed ;
        background: rgba(0,0,0,.5);
        width: 100%;
        height: 100%;
        z-index: 1000;
        display: none;
    }
    .headImageNameTcDo{
        background: white;
        position: absolute;
        margin: auto;
        right: 0;
        left: 0;
        top: 0;
        bottom: 0;
        height: 412px;
        width: 440px;
        border-radius: 8px;
    }
    .txxg{
        width: 141px;
        height: 141px;
        margin: 30px auto 0 auto;
        border-radius: 50%;
        background: #00aff2;
        background: url("images/xiugaiUsered.png")top center;
        background-size: 100% 100%;
        position: relative;
        overflow: hidden;

    }
    .txxgbtn{
        width:100% ;
        height: 40px;
        position: absolute;
        background: rgba(0,0,0,.4)no-repeat top;
        bottom: 0;
        line-height: 30px;
        text-align: center;
        color: white;
        letter-spacing: 1px;
        cursor: pointer;
    }
    .title-RevisedInfor{
        margin: 0 auto;
        width: 80%;
        text-align: left;
        font-size: 22px;
        padding-top: 40px;
    }
    .nickname{
        width: 100%;
        text-align: center;
        margin-top: 30px;
    }
    .nicknameXg{
        width: 270px;
        height: 30px;
        border: 1px #e0e3e7 solid;
        border-radius: 4px;
    }
    .confirmbtn{
        width:151px ;
        height: 36px;
        background: #0c7ff2;
        border-radius: 6px;
        margin: 0 auto;
        color: white;
        text-align: center;
        line-height: 36px;
        font-size: 18px;
        margin-top: 30px;
        cursor: pointer;
    }
    .closebtn{
        position: absolute;
        right: 35px;
        top: 45px;
        cursor: pointer;
    }
</style>
<body>
   <div class="box">
       <!--导航栏-->
       <!--弹窗（修改头像名字）-->
       <div class="headImageNameTc">
           <div class="headImageNameTcDo">
               <!--关闭按钮-->
               <div class="closebtn">
                   <img src="images/guanbi.png" alt="">
               </div>
               <!--修改资料-->
               <div class="RevisedInformation">
                   <div class="title-RevisedInfor">修改资料</div>
                   <!--上传头像-->
                   <div class="txxg">
                       <div class="txxgbtn">
                            上传头像
                       </div>
                   </div>
                   <!--昵称-->
                   <div class="nickname">
                       <span>昵称 : </span>
                       <input type="text" placeholder="王宇翔王宇翔王宇翔" class="nicknameXg">
                   </div>

                   <div class="confirmbtn">
                       确认
                   </div>

               </div>

           </div>

       </div>
       <!--#include file="header.html"-->
       <div class="userBackground">
           <div class="userContent">
               <!--用户头像-->
               <div class="usertopImg">
                   <img src="{$userInfo.portrait|default='images/userTxsa.png'}" alt="" width="100%">
               </div>
               <!--修改区-->
               <div class="modifyinformation">
                   <p>
                       <input type="text" placeholder="{$userInfo.nickname}" class="InpUserName">
                       <span class="modifyUserName"><img src="images/xiugaiUser.png" alt="修改"></span>
                   </p>
                   <p class="modifysonp">
                       <span>注册时间 : {$userInfo.create_time|format_time='Y年m月d日'}</span>
                       <span>UID : {$userInfo.top_num}</span>
                       <span>订阅作者 :  <span style="color: #D40507;font-size: 18px">{$userInfo.subscribe}</span></span>
                   </p>
               </div>
               <!--升级头条作者-->
               <div class="upgrade">
                   升级头条作者
               </div>

           </div>
       </div>
       <!--主要内容-->
       <div class="subscription-history">
           <!--我的订阅和游览历史-->
           <div class="subhis">
               <ul>
                   <li>我的订阅</li>
                   <li>浏览历史</li>
               </ul>
           </div>
           <!--subscription-->
           <div class="subscription">
              <!--{if condition="subscribeList"}-->
              <ul>
                  <!--{foreach name='subscribeList' item='vo' }-->
                   <li>
                       <img src="images/xiugaiUsered.png" alt="" class="subscription-Tx">
                       <div class="subscriptionContent">
                           <p class="subscriptionTitle">{$vo.nickname}</p>
                           <p class="subscriptionText">{$vo.desc}</p>
                       </div>
                       <div class="bscriptionBtn">
                            取消订阅
                       </div>
                   </li>
                   <!--{/foreach}-->
              </ul>
              <!--{else /}-->
              <ul>
                <div class="NewType-Content">
                     <span>还未有订阅作者</span>
                </div>
              </ul>
               <!--{/if}-->
           </div>



           <!--history-->
           <div class="historyrecord">
               <!--{if condition="$historyList"}-->
               <div class="NewType-Content">

                   <ul>
                       <!--{foreach name='historyList' item='vo' }-->
                       <li onclick='window.location.href="/newsContent/{$vo.content_id}"'>
                           <div class="NewType-Detail">
                               <div class="NewTypeImg">
                                   <div class="NewTypeImgBox">
                                       <img src="{$vo.image}" alt="">
                                   </div>

                               </div>
                               <div class="NewTypeText">
                                   <div class="TextTitle">
                                       {$vo.title}
                                   </div>
                                   <div class="TextContent">
                                       {$vo.description}
                                   </div>
                                   <div class="TextSource">
                                       <span class="roof-placement">置顶</span>
                                       <span>{$vo.author}</span>
                                       <span>{$vo.time|format_time='Y/m/d H:i'}</span>
                                       <span class="Guankan"><img src="images/guankan.png" alt="" width="15px">{$vo.views}</span>
                                   </div>
                               </div>
                           </div>
                       </li>
                       <!--{/foreach}-->
                   </ul>
                   <div class="LookMore">
                       <span id='news_more'>查看更多</span>
                   </div>
               </div>
               <!--{else /}-->
               <div class="NewType-Content">
                   <span>没有找到相关内容</span>
               </div>
               <!--{/if}-->
               <!--专栏-->
               <div class="column-special">
                   <div class="Column-ranking-picture">
                       <img src="images/columbTitle.png" alt="">
                   </div>
                   <ul class="Column-ranking-ul">
                       <!--{foreach name='columnList' item='vo' }-->
                       <li onclick='window.location.href="/Columns/{$vo.id}"'>
                           <div class="numRank">{$key+1}</div>
                           <div class="rankImg">
                               <img src="{$vo.icon}" alt="">
                           </div>
                           <div class="rankContent">
                               <p class="rankContentA">{$vo.name}</p>
                               <p class="rankContentB">{$vo.desc}</p>
                           </div>
                       </li>
                       <!--{/foreach}-->
                   </ul>
               </div>
           </div>
       </div>


       <!--底部-->
       <!--#include file="footer.html"-->
   </div>

</body>
</html>
<script src="js/jquery-3.2.1.min.js"></script>
<script src="js/layui/layui.all.js"></script>
<script>
    var page_num = 2;
    var author_id = 1;
    $(".bscriptionBtn").attr("wyx","1");

    $(".closebtn").click(function () {
        $(".headImageNameTc").hide()
    });
    $(".modifyUserName img").click(function () {
        $(".headImageNameTc").show()
        // $(".InpUserName").css({
        //     ".pointer-events":"all",
        // });
        // $(".InpUserName").focus();
    });


    layui.use('layer', function(){  //layer弹框
        var layer = layui.layer;
    });
    /*升级头条作者弹窗*/
    $(".upgrade").click(function () {
        layer.msg('该功能暂未开放，可咨询客服申请头条作者');
    });
    /*修改名字*/


    /*订阅与取消订阅按钮*/
    $(".bscriptionBtn").click(function () {
        var $this=$(this);
        if($this.attr("type")==2){
            $(this).css({
                "background":"#999999",
            });
            $(this).html("取消订阅");
            $this.attr("type","1")
        }else {
            $(this).css({
                "background":"#D40507",
            });
            $(this).html("+订阅");
            $this.attr("type","2")
        }
    });
    /*我的订阅与浏览历史切换*/
    $(".subhis ul li").click(function () {
       var $this=$(this);
       $this.css({
           "font-weight":"bold"
       });
        $this.siblings().css({
            "font-weight":"300"
        });
       console.log($this.index());
       if($this.index()==0){
          $(".subscription").show();
          $(".historyrecord").hide();
       }else {
           $(".subscription").hide();
           $(".historyrecord").show()
       }
    })


    $('#news_more').click(function(){
        $.ajax({
            type:"post",
            url:"/Home/Ajax/get_history",
            data:{page_num:page_num},
            dataType:'json',
            success:function(rdata){
                // console.log(rdata)
                if(rdata.code==1){
                    $('.NewType-Content ul').append(rdata.data);
                    page_num++;
                }else{
                    $('#news_more').html(rdata.info);
                }
            }
        });
    })

    $(".bscriptionBtn").click(function () {
        var type=$(".bscriptionBtn").attr("type");
        console.log(type);
        console.log(author_id);
        // return false;
        $.ajax({
            type:"post",
            url:"/Home/User/subscribeAuthor",
            data:{author_id:author_id,type:type},
            dataType:'json',
            success:function(data){
                // console.log(data);
                if(data.code==1){
                    layer.msg(data.info);
                }else{
                    layer.msg(data.info);
                }
            }
        });
    })

</script>